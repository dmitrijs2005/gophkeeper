
<!DOCTYPE html>
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
		<title>cli: Go Coverage Report</title>
		<style>
			body {
				background: black;
				color: rgb(80, 80, 80);
			}
			body, pre, #legend span {
				font-family: Menlo, monospace;
				font-weight: bold;
			}
			#topbar {
				background: black;
				position: fixed;
				top: 0; left: 0; right: 0;
				height: 42px;
				border-bottom: 1px solid rgb(80, 80, 80);
			}
			#content {
				margin-top: 50px;
			}
			#nav, #legend {
				float: left;
				margin-left: 10px;
			}
			#legend {
				margin-top: 12px;
			}
			#nav {
				margin-top: 10px;
			}
			#legend span {
				margin: 0 5px;
			}
			.cov0 { color: rgb(192, 0, 0) }
.cov1 { color: rgb(128, 128, 128) }
.cov2 { color: rgb(116, 140, 131) }
.cov3 { color: rgb(104, 152, 134) }
.cov4 { color: rgb(92, 164, 137) }
.cov5 { color: rgb(80, 176, 140) }
.cov6 { color: rgb(68, 188, 143) }
.cov7 { color: rgb(56, 200, 146) }
.cov8 { color: rgb(44, 212, 149) }
.cov9 { color: rgb(32, 224, 152) }
.cov10 { color: rgb(20, 236, 155) }

		</style>
	</head>
	<body>
		<div id="topbar">
			<div id="nav">
				<select id="files">
				
				<option value="file0">github.com/dmitrijs2005/gophkeeper/internal/client/cli/app.go (16.1%)</option>
				
				<option value="file1">github.com/dmitrijs2005/gophkeeper/internal/client/cli/auth.go (0.0%)</option>
				
				<option value="file2">github.com/dmitrijs2005/gophkeeper/internal/client/cli/input.go (85.7%)</option>
				
				<option value="file3">github.com/dmitrijs2005/gophkeeper/internal/client/cli/item.go (56.1%)</option>
				
				<option value="file4">github.com/dmitrijs2005/gophkeeper/internal/client/cli/repl.go (77.4%)</option>
				
				<option value="file5">github.com/dmitrijs2005/gophkeeper/internal/client/cli/root.go (0.0%)</option>
				
				</select>
			</div>
			<div id="legend">
				<span>not tracked</span>
			
				<span class="cov0">no coverage</span>
				<span class="cov1">low coverage</span>
				<span class="cov2">*</span>
				<span class="cov3">*</span>
				<span class="cov4">*</span>
				<span class="cov5">*</span>
				<span class="cov6">*</span>
				<span class="cov7">*</span>
				<span class="cov8">*</span>
				<span class="cov9">*</span>
				<span class="cov10">high coverage</span>
			
			</div>
		</div>
		<div id="content">
		
		<pre class="file" id="file0" style="display: none">package cli

import (
        "bufio"
        "context"
        "fmt"
        "log"
        "os"
        "time"

        "github.com/dmitrijs2005/gophkeeper/internal/client/client"
        "github.com/dmitrijs2005/gophkeeper/internal/client/config"
        "github.com/dmitrijs2005/gophkeeper/internal/client/services"

        _ "modernc.org/sqlite"
)

type Mode string

const (
        ModeOffline  Mode = "offline"
        ModeOnline   Mode = "online"
        ModeDisabled Mode = "disabled"
)

type App struct {
        config       *config.Config
        authService  services.AuthService
        entryService services.EntryService
        masterKey    []byte
        userName     string
        Mode         Mode
        reader       *bufio.Reader
}

func NewApp(c *config.Config) (*App, error) <span class="cov0" title="0">{

        ctx := context.Background()

        db, err := client.InitDatabase(ctx, "vault.db")
        if err != nil </span><span class="cov0" title="0">{
                log.Printf("error initializing database: %s", err.Error())
                return nil, err
        }</span>

        <span class="cov0" title="0">apiClient, err := client.NewGophKeeperClientService(c.ServerEndpointAddr)
        if err != nil </span><span class="cov0" title="0">{
                return nil, err
        }</span>

        <span class="cov0" title="0">as := services.NewAuthService(apiClient, db)
        es := services.NewEntryService(apiClient, db)

        return &amp;App{config: c, authService: as, entryService: es, reader: bufio.NewReader(os.Stdin)}, nil</span>
}

func (app *App) setMode(mode Mode) <span class="cov10" title="3">{
        if app.Mode != mode </span><span class="cov6" title="2">{
                app.Mode = mode
                log.Printf("Switched to %s mode\n", mode)
        }</span>
}

func (a *App) Run(ctx context.Context) <span class="cov0" title="0">{
        defer a.authService.Close(ctx)
        a.Root(ctx)
}</span>

func (a *App) isLoggedIn() bool <span class="cov6" title="2">{

        fmt.Println("a.masterKey", a.masterKey)

        return a.masterKey != nil
}</span>

func (a *App) StartOnlineStatusWatcher(ctx context.Context, interval time.Duration) <span class="cov0" title="0">{

        ticker := time.NewTicker(interval)
        defer ticker.Stop()

        for </span><span class="cov0" title="0">{
                select </span>{
                case &lt;-ticker.C:<span class="cov0" title="0">
                        ctx, cancel := context.WithTimeout(context.Background(), 3*time.Second)
                        err := a.authService.Ping(ctx)
                        cancel()

                        if err != nil </span><span class="cov0" title="0">{
                                if a.Mode == ModeOnline </span><span class="cov0" title="0">{
                                        a.setMode(ModeOffline)
                                }</span>
                        } else<span class="cov0" title="0"> {
                                if a.Mode != ModeOnline </span><span class="cov0" title="0">{
                                        a.setMode(ModeOnline)
                                }</span>
                        }

                case &lt;-ctx.Done():<span class="cov0" title="0">
                        return</span>
                }
        }
}
</pre>
		
		<pre class="file" id="file1" style="display: none">package cli

import (
        "context"
        "errors"
        "fmt"
        "log"
        "os"

        "github.com/dmitrijs2005/gophkeeper/internal/client/client"
        "github.com/dmitrijs2005/gophkeeper/internal/common"
)

var getSimpleText = GetSimpleText
var getPassword = GetPassword

func (a *App) Register(ctx context.Context) error <span class="cov0" title="0">{

        userName, err := getSimpleText(a.reader, "Enter email", os.Stdout)
        if err != nil </span><span class="cov0" title="0">{
                return err
        }</span>

        <span class="cov0" title="0">password, err := getPassword(os.Stdout)
        if err != nil </span><span class="cov0" title="0">{
                return err
        }</span>

        <span class="cov0" title="0">defer common.WipeByteArray(password)

        err = a.authService.Register(ctx, userName, password)
        if err != nil </span><span class="cov0" title="0">{
                fmt.Println(err.Error())
                return err
        }</span>

        <span class="cov0" title="0">fmt.Println("Success!")

        return nil</span>

}

func (a *App) Login(ctx context.Context) error <span class="cov0" title="0">{

        userName, err := GetSimpleText(a.reader, "Enter email", os.Stdout)
        if err != nil </span><span class="cov0" title="0">{
                return err
        }</span>

        <span class="cov0" title="0">password, err := GetPassword(os.Stdout)
        if err != nil </span><span class="cov0" title="0">{
                return err
        }</span>

        <span class="cov0" title="0">defer common.WipeByteArray(password)

        var masterKey []byte
        var mode Mode

        masterKey, err = a.authService.OnlineLogin(ctx, userName, password)

        if err != nil </span><span class="cov0" title="0">{
                if errors.Is(err, client.ErrUnavailable) </span><span class="cov0" title="0">{
                        log.Printf("Server unavailable, trying offline login...")
                        masterKey, err = a.authService.OfflineLogin(ctx, userName, password)
                        if err != nil </span><span class="cov0" title="0">{
                                log.Printf("Offline login unsuccessfull: %s", err.Error())
                                mode = ModeDisabled
                        }</span> else<span class="cov0" title="0"> {
                                log.Printf("Offline login successfull")
                                mode = ModeOffline
                        }</span>
                } else<span class="cov0" title="0"> {
                        log.Printf("Login unsuccessfull: %s", err.Error())
                }</span>
        } else<span class="cov0" title="0"> {
                log.Printf("Login successfull")
        }</span>

        <span class="cov0" title="0">a.masterKey = masterKey
        a.setMode(mode)

        return nil</span>

}

func (a *App) Logout(ctx context.Context) error <span class="cov0" title="0">{
        err := a.authService.ClearOfflineData(ctx)
        if err != nil </span><span class="cov0" title="0">{
                return err
        }</span>

        <span class="cov0" title="0">a.masterKey = nil

        return nil</span>

}
</pre>
		
		<pre class="file" id="file2" style="display: none">package cli

import (
        "bufio"
        "errors"
        "fmt"
        "io"
        "os"
        "strings"

        "golang.org/x/term"
)

var readPassword = term.ReadPassword

func GetSimpleText(reader *bufio.Reader, prompt string, w io.Writer) (string, error) <span class="cov10" title="27">{
        if _, err := fmt.Fprint(w, prompt+"\n&gt; "); err != nil </span><span class="cov0" title="0">{
                return "", err
        }</span>
        <span class="cov10" title="27">line, err := reader.ReadString('\n')
        if err != nil </span><span class="cov1" title="1">{
                if errors.Is(err, io.EOF) &amp;&amp; len(line) &gt; 0 </span><span class="cov1" title="1">{
                        return strings.TrimSpace(line), nil
                }</span>
                <span class="cov0" title="0">return "", err</span>
        }
        <span class="cov9" title="26">return strings.TrimSpace(line), nil</span>
}

func GetPassword(w io.Writer) ([]byte, error) <span class="cov1" title="1">{
        if _, err := fmt.Fprint(w, "Enter password: "); err != nil </span><span class="cov0" title="0">{
                return nil, err
        }</span>
        <span class="cov1" title="1">pw, err := readPassword(int(os.Stdin.Fd()))
        fmt.Fprintln(w)
        if err != nil </span><span class="cov1" title="1">{
                return nil, err
        }</span>
        <span class="cov0" title="0">return pw, nil</span>
}

func GetMultiline(reader *bufio.Reader, prompt string, w io.Writer) (string, error) <span class="cov4" title="4">{
        if _, err := fmt.Fprint(w, prompt+"\n(двойной Enter — закончить)\n"); err != nil </span><span class="cov0" title="0">{
                return "", err
        }</span>

        <span class="cov4" title="4">var lines []string

        for </span><span class="cov7" title="9">{
                line, _ := reader.ReadString('\n')
                line = strings.TrimRight(line, "\r\n")

                if line == "" </span><span class="cov4" title="4">{
                        break</span>
                }

                <span class="cov5" title="5">lines = append(lines, line)</span>
        }

        <span class="cov4" title="4">text := strings.Join(lines, "\n")

        return strings.TrimSpace(text), nil</span>
}

func GetMetadata(reader *bufio.Reader) ([]string, error) <span class="cov7" title="10">{
        fmt.Println("Enter metadata, format name=value")

        lines := make([]string, 0)
        for </span><span class="cov9" title="19">{
                line, _ := reader.ReadString('\n')
                line = strings.TrimRight(line, "\r\n")

                if line == "" </span><span class="cov7" title="10">{
                        break</span>
                }

                <span class="cov7" title="9">lines = append(lines, line)</span>
        }

        <span class="cov7" title="10">return lines, nil</span>
}
</pre>
		
		<pre class="file" id="file3" style="display: none">package cli

import (
        "bufio"
        "context"
        "fmt"
        "log"
        "os"
        "path/filepath"
        "strings"

        "github.com/dmitrijs2005/gophkeeper/internal/client/models"
        "github.com/dmitrijs2005/gophkeeper/internal/cryptox"
        "github.com/dmitrijs2005/gophkeeper/internal/filex"
        "github.com/dmitrijs2005/gophkeeper/internal/netx"
)

func (a *App) addEntry(ctx context.Context, addEntryDetails func(context.Context) (models.TypedEntry, error)) error <span class="cov6" title="4">{

        item, file, err := a.InputEnvelope(ctx, a.reader, addEntryDetails)
        if err != nil </span><span class="cov0" title="0">{
                log.Printf("error: %v", err)
                return err
        }</span>

        <span class="cov6" title="4">err = a.entryService.Add(ctx, item, file, a.masterKey)
        if err != nil </span><span class="cov0" title="0">{
                log.Printf("error: %v", err)
                return err
        }</span>

        <span class="cov6" title="4">return nil</span>

}

func (a *App) AddNote(ctx context.Context) error <span class="cov1" title="1">{
        return a.addEntry(ctx, a.addNoteDetails)
}</span>

func (a *App) AddCreditCard(ctx context.Context) error <span class="cov1" title="1">{
        return a.addEntry(ctx, a.addCreditCardDetails)
}</span>

func (a *App) AddLogin(ctx context.Context) error <span class="cov1" title="1">{
        return a.addEntry(ctx, a.addLoginDetails)
}</span>

func (a *App) AddFile(ctx context.Context) error <span class="cov1" title="1">{
        return a.addEntry(ctx, a.addFileDetails)
}</span>

func (a *App) addNoteDetails(ctx context.Context) (models.TypedEntry, error) <span class="cov5" title="3">{

        text, err := GetMultiline(a.reader, "Enter note text (double Enter to finish):", os.Stdout)
        if err != nil </span><span class="cov0" title="0">{
                log.Printf("error: %v", err)
                return nil, err
        }</span>

        <span class="cov5" title="3">return &amp;models.Note{Text: text}, nil</span>

}

func (a *App) addCreditCardDetails(ctx context.Context) (models.TypedEntry, error) <span class="cov3" title="2">{

        number, err := GetSimpleText(a.reader, "Enter card number", os.Stdout)
        if err != nil </span><span class="cov0" title="0">{
                log.Printf("error: %v", err)
                return nil, err
        }</span>

        <span class="cov3" title="2">expiration, err := GetSimpleText(a.reader, "Enter card number", os.Stdout)
        if err != nil </span><span class="cov0" title="0">{
                log.Printf("error: %v", err)
                return nil, err
        }</span>

        <span class="cov3" title="2">return &amp;models.CreditCard{Number: number, Expiration: expiration}, nil</span>

}

func (a *App) addLoginDetails(ctx context.Context) (models.TypedEntry, error) <span class="cov3" title="2">{

        username, err := GetSimpleText(a.reader, "Enter username", os.Stdout)
        if err != nil </span><span class="cov0" title="0">{
                log.Printf("error: %v", err)
                return nil, err
        }</span>

        <span class="cov3" title="2">password, err := GetSimpleText(a.reader, "Enter password", os.Stdout)
        if err != nil </span><span class="cov0" title="0">{
                log.Printf("error: %v", err)
                return nil, err
        }</span>

        <span class="cov3" title="2">url, err := GetSimpleText(a.reader, "Enter URL", os.Stdout)
        if err != nil </span><span class="cov0" title="0">{
                log.Printf("error: %v", err)
                return nil, err
        }</span>

        <span class="cov3" title="2">return &amp;models.Login{Username: username, Password: password, URL: url}, nil</span>

}

func (a *App) addFileDetails(ctx context.Context) (models.TypedEntry, error) <span class="cov3" title="2">{

        filePath, err := GetSimpleText(a.reader, "Enter file path", os.Stdout)
        if err != nil </span><span class="cov0" title="0">{
                log.Printf("error: %v", err)
                return nil, err
        }</span>

        <span class="cov3" title="2">return &amp;models.BinaryFile{Path: filePath}, nil</span>

}

func (a *App) InputEnvelope(
        ctx context.Context,
        r *bufio.Reader,
        rest func(ctx context.Context) (models.TypedEntry, error),
) (models.Envelope, *models.File, error) <span class="cov10" title="10">{

        var zero models.Envelope

        title, err := GetSimpleText(r, "Enter title", os.Stdout)
        if err != nil </span><span class="cov0" title="0">{
                return zero, nil, fmt.Errorf("get title: %w", err)
        }</span>
        <span class="cov10" title="10">title = strings.TrimSpace(title)
        if title == "" </span><span class="cov1" title="1">{
                return zero, nil, fmt.Errorf("title is required")
        }</span>
        <span class="cov9" title="9">if err := ctx.Err(); err != nil </span><span class="cov3" title="2">{
                return zero, nil, err
        }</span>
        <span class="cov8" title="7">payload, err := rest(ctx)
        if err != nil </span><span class="cov5" title="3">{
                return zero, nil, err
        }</span>

        <span class="cov6" title="4">var file *models.File

        if m, ok := payload.(models.Materializer); ok </span><span class="cov1" title="1">{

                file, err = m.Materialize(ctx)
                if err != nil </span><span class="cov0" title="0">{
                        return zero, nil, fmt.Errorf("materialize: %w", err)
                }</span>

        }

        <span class="cov6" title="4">md, err := GetMetadata(r)
        if err != nil </span><span class="cov0" title="0">{
                log.Printf("error: %v", err)
                return zero, nil, err
        }</span>

        <span class="cov6" title="4">metadata, err := models.MetadataFromString(md)
        if err != nil </span><span class="cov0" title="0">{
                log.Printf("error: %v", err)
                return zero, nil, err
        }</span>

        <span class="cov6" title="4">x, err := models.Wrap(payload.GetType(), title, metadata, payload)
        if err != nil </span><span class="cov0" title="0">{
                log.Printf("error: %v", err)
                return zero, nil, err
        }</span>

        <span class="cov6" title="4">return x, file, nil</span>
}

func (a *App) List(ctx context.Context) error <span class="cov1" title="1">{
        s, err := a.entryService.List(ctx, a.masterKey)
        if err != nil </span><span class="cov0" title="0">{
                return err
        }</span>

        <span class="cov1" title="1">for _, item := range s </span><span class="cov3" title="2">{
                fmt.Println(item)
        }</span>

        <span class="cov1" title="1">return nil</span>

}

func (a *App) Sync(ctx context.Context) error <span class="cov1" title="1">{
        err := a.entryService.Sync(ctx)
        if err != nil </span><span class="cov0" title="0">{
                return err
        }</span>
        <span class="cov1" title="1">return nil</span>
}

func (a *App) Delete(ctx context.Context) error <span class="cov1" title="1">{

        id, err := GetSimpleText(a.reader, "Enter record id to delete", os.Stdout)
        if err != nil </span><span class="cov0" title="0">{
                return err
        }</span>

        <span class="cov1" title="1">err = a.entryService.DeleteByID(ctx, id)

        if err != nil </span><span class="cov0" title="0">{
                return err
        }</span>

        <span class="cov1" title="1">return nil</span>
}

func (a *App) Show(ctx context.Context) error <span class="cov3" title="2">{

        id, err := GetSimpleText(a.reader, "Enter record id to show", os.Stdout)
        if err != nil </span><span class="cov0" title="0">{
                return err
        }</span>

        <span class="cov3" title="2">envelope, err := a.entryService.Get(ctx, id, a.masterKey)

        if err != nil </span><span class="cov1" title="1">{
                return err
        }</span>

        <span class="cov1" title="1">log.Println(envelope.Title)

        x, err := envelope.Unwrap()
        if err != nil </span><span class="cov0" title="0">{
                return err
        }</span>

        <span class="cov1" title="1">switch item := x.(type) </span>{
        case models.Note:<span class="cov1" title="1">
                log.Printf("Note: %s", item.Text)</span>

        case models.CreditCard:<span class="cov0" title="0">
                log.Printf("Number: %s", item.Number)
                log.Printf("Expiration: %s", item.Expiration)
                log.Printf("CVV: %s", item.CVV)
                log.Printf("Holder: %s", item.Holder)</span>

        case models.Login:<span class="cov0" title="0">
                log.Printf("Username: %s", item.Username)
                log.Printf("Password: %s", item.Password)
                log.Printf("URL: %s", item.URL)</span>

        case models.BinaryFile:<span class="cov0" title="0">

                url, err := a.entryService.GetPresignedGetUrl(ctx, id)

                if err != nil </span><span class="cov0" title="0">{
                        return err
                }</span>

                <span class="cov0" title="0">encrypted, err := netx.DownloadFromS3PresignedURL(url)
                if err != nil </span><span class="cov0" title="0">{
                        return err
                }</span>

                <span class="cov0" title="0">fd, err := a.entryService.GetFile(ctx, id)
                if err != nil </span><span class="cov0" title="0">{
                        return err
                }</span>

                <span class="cov0" title="0">dir, err := filex.EnsureSubdDir("download")
                if err != nil </span><span class="cov0" title="0">{
                        return err
                }</span>

                <span class="cov0" title="0">ef := &amp;cryptox.EncryptedFile{Cyphertext: encrypted, Key: fd.EncryptedFileKey, Nonce: fd.Nonce}

                ouputFile := filepath.Join(dir, filepath.Base(item.Path))

                err = cryptox.DecryptFileTo(ouputFile, ef)
                if err != nil </span><span class="cov0" title="0">{
                        return err
                }</span>

                <span class="cov0" title="0">log.Printf("File saved to: %s", ouputFile)</span>
        }

        <span class="cov1" title="1">for _, md := range envelope.Metadata </span><span class="cov0" title="0">{
                log.Printf("%s: %s", md.Name, md.Value)
        }</span>

        <span class="cov1" title="1">return nil</span>
}
</pre>
		
		<pre class="file" id="file4" style="display: none">package cli

import (
        "bufio"
        "context"
        "fmt"
        "strings"
)

var printlnFn = fmt.Println

type execIface interface {
        isLoggedIn() bool
        Register(ctx context.Context) error
        Login(ctx context.Context) error
        AddNote(ctx context.Context) error
        List(ctx context.Context) error
        AddLogin(ctx context.Context) error
        AddFile(ctx context.Context) error
        AddCreditCard(ctx context.Context) error
        Show(ctx context.Context) error
        Sync(ctx context.Context) error
        Logout(ctx context.Context) error
}

func runREPL(ctx context.Context, a execIface, statusFn func() string, scanner *bufio.Scanner) <span class="cov3" title="2">{
        for </span><span class="cov10" title="12">{
                printlnFn(fmt.Sprintf("gk&gt; %s &gt; ", statusFn()))
                if !scanner.Scan() </span><span class="cov0" title="0">{
                        return
                }</span>
                <span class="cov10" title="12">line := scanner.Text()
                parts := strings.Fields(line)
                if len(parts) == 0 </span><span class="cov0" title="0">{
                        continue</span>
                }
                <span class="cov10" title="12">cmd := parts[0]
                args := parts[1:]

                switch cmd </span>{
                case "help":<span class="cov3" title="2">
                        if a.isLoggedIn() </span><span class="cov1" title="1">{
                                printlnFn("Available commands: (l)ist, addnote, addlogin, logout, exit, show")
                        }</span> else<span class="cov1" title="1"> {
                                printlnFn("Available commands: register, login")
                        }</span>
                case "register":<span class="cov0" title="0">
                        _ = a.Register(ctx)</span>
                case "login":<span class="cov1" title="1">
                        _ = a.Login(ctx)</span>
                case "addnote":<span class="cov1" title="1">
                        _ = a.AddNote(ctx)</span>
                case "addlogin":<span class="cov0" title="0">
                        _ = a.AddLogin(ctx)</span>
                case "addfile":<span class="cov0" title="0">
                        _ = a.AddFile(ctx)</span>
                case "addcard":<span class="cov0" title="0">
                        _ = a.AddCreditCard(ctx)</span>
                case "show":<span class="cov1" title="1">
                        _ = a.Show(ctx)</span>
                case "l", "list":<span class="cov1" title="1">
                        _ = a.List(ctx)</span>
                case "sync":<span class="cov1" title="1">
                        _ = a.Sync(ctx)</span>
                case "exit", "quit":<span class="cov3" title="2">
                        printlnFn("Bye!")
                        return</span>
                case "get":<span class="cov3" title="2">
                        if len(args) == 0 </span><span class="cov1" title="1">{
                                printlnFn("Usage: get &lt;id&gt;")
                                continue</span>
                        }
                        <span class="cov1" title="1">printlnFn(fmt.Sprintf("fetching entry %s ... (stub)", args[0]))</span>
                case "logout":<span class="cov0" title="0">
                        _ = a.Logout(ctx)</span>
                default:<span class="cov1" title="1">
                        printlnFn("Unknown command:", cmd)</span>
                }
        }
}
</pre>
		
		<pre class="file" id="file5" style="display: none">package cli

import (
        "bufio"
        "context"
        "fmt"
        "os"
)

func (a *App) getStatus() string <span class="cov0" title="0">{
        s := ""
        if a.userName != "" </span><span class="cov0" title="0">{
                s = a.userName + " "
        }</span>
        <span class="cov0" title="0">if a.Mode != "" </span><span class="cov0" title="0">{
                s = s + string(a.Mode)
        }</span>
        <span class="cov0" title="0">if s != "" </span><span class="cov0" title="0">{
                s = fmt.Sprintf("(%s)", s)
        }</span>
        <span class="cov0" title="0">return s</span>
}

func (a *App) Root(ctx context.Context) <span class="cov0" title="0">{
        printlnFn("Welcome to GophKeeper CLI (type 'help' for commands)")
        scanner := bufio.NewScanner(os.Stdin)

        a.Login(ctx) 

        go func() </span><span class="cov0" title="0">{
                a.StartOnlineStatusWatcher(ctx, a.config.OnlineCheckInterval)
        }</span>()

        <span class="cov0" title="0">runREPL(ctx, a, a.getStatus, scanner)</span>
}
</pre>
		
		</div>
	</body>
	<script>
	(function() {
		var files = document.getElementById('files');
		var visible;
		files.addEventListener('change', onChange, false);
		function select(part) {
			if (visible)
				visible.style.display = 'none';
			visible = document.getElementById(part);
			if (!visible)
				return;
			files.value = part;
			visible.style.display = 'block';
			location.hash = part;
		}
		function onChange() {
			select(files.value);
			window.scrollTo(0, 0);
		}
		if (location.hash != "") {
			select(location.hash.substr(1));
		}
		if (!visible) {
			select("file0");
		}
	})();
	</script>
</html>
